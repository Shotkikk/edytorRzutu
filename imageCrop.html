<!DOCTYPE html>
<html lang="en">
<head>

    <script src="node_modules/jquery/dist/jquery.min.js"></script>

    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

    <script class="cropitReload" src="node_modules/cropit/dist/jquery.cropit.js"></script>

    <script src="JS/fileLoad.js"></script>

    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        body, html {
            width: 100%;
            height: 100%;
            clear: both;
            margin: 0 auto;
            padding: 0;
            display: table;
            color: #626262;
        }

        body {
            clear: both;
            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }
        .image-editor {
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%,-50%);
            -moz-transform: translate(-50%,-50%);
            -o-transform: translate(-50%,-50%);
            -ms-transform: translate(-50%,-50%);
            transform: translate(-50%,-50%);
            z-index: 1;
        }
        .cropit-preview {
            position: relative;
            height: 600px;
            width: 1110px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        .cropit-preview.cropit-image-loading .spinner {
            opacity: 1;
        }

        .cropit-preview-image-container {
            cursor: move;
        }

        .cropit-preview-background {
            opacity: .2;
            cursor: auto;
        }

        .image-size-label {
            margin-top: 10px;
        }

        .cropit-image-zoom-input {
            padding: 0 10px 0 10px;
        }
        .cropit-actions {
            width: 1140px;
        }

        .image-zoom-section {
            margin: 0;
            padding: 0;
        }

        button {
            margin-top: 10px;
        }

        .fa-redo:hover {
            animation: fa-spin 2s infinite linear;
        }

        input, .export {
            /* Use relative position to prevent from being covered by image background */
            position: relative;
        }

        input::-moz-range-thumb {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #888;
            -webkit-border-radius: 50%;
            border-radius: 50%;
            -webkit-transition: background 0.25s;
            -moz-transition: background 0.25s;
            -o-transition: background 0.25s;
            -ms-transition: background 0.25s;
            transition: background 0.25s;
        }

        input::-moz-range-track {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            height: 5px;
            background: #f5f5f5;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            outline: none;
        }

        input[type=range]::-ms-track {
            width: 100%;
            cursor: pointer;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }

        .vmiddle {
            vertical-align: middle !important;
        }

        .edit-component {
            height: 50px;
            vertical-align: middle !important;
            display: table-cell !important;
        }

        .margin-zero {
            margin: 0;
        }

        .edit-section-break {
            margin-left: 20px;
        }

        .btn-file {
            position: relative;
            overflow: hidden;
        }
        .cropit-preview-image-container {
            position: absolute;
            overflow: hidden;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
        }
        .cropit-wrapper {
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .btn-scale {
            position: absolute;
            float: left;
            z-index: 2;
            margin-left: 10px;
        }
        .btn-round-lg {
            border-radius: 22.5px;
        }
        .btn-round {
            border-radius: 17px;
        }
        .btn-round-sm {
            border-radius: 15px;
        }
        .btn-round-xs {
            border-radius: 11px;
            padding-left: 10px;
            padding-right: 10px;
        }

    </style>
</head>
<body>
<div class="cropit-wrapper">
    <div class="btn-scale">
        <button class="btn btn-lg btn-round-lg btn-outline-primary scale-button" id="scaleTo1-1">1:1</button>
        <button class="btn btn-lg btn-round-lg btn-outline-primary scale-button" id="scaleTo1-1.5">1:1.5</button>
        <button class="btn btn-lg btn-round-lg btn-outline-primary scale-button" id="scaleTo2-1">1:2</button>
    </div>
    <div class="image-editor">
        <div class="cropit-preview"></div>
        <div class="d-table row cropit-actions">
            <div class="col-md-2 pull-left edit-component">
                <input type="file" class="cropit-image-input">
            </div>
            <div class="col-md-6 text-center image-zoom-section edit-component">
                <i class="far fa-image pull-left d-table-cell vmiddle"></i>
                <input type="range" class="cropit-image-zoom-input d-table-cell vmiddle">
                <i class="far fa-2x fa-image d-table-cell vmiddle"></i>
                <button class="rotate-ccw btn btn-default margin-zero edit-section-break"><i class="fas fa-redo"></i>
                </button>
                <button class="rotate-cw btn btn-default margin-zero"><i class="fas fa-redo fa-flip-horizontal"></i>
                </button>
            </div>
            <div class="col-md-2 edit-component text-right">
                <button class="export btn btn-primary margin-zero">Dalej <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    $(function cropit() {
        $('.image-editor').cropit({
            smallImage: 'allow',
            exportZoom: 2,
            minZoom: 'fit',
            imageBackground: true,
            allowDragNDrop: false,
            imageState: {
                src: 'http://lorempixel.com/500/400/'
            }
        });

        $('.rotate-cw').click(function () {
            $('.image-editor').cropit('rotateCW');
        });

        $('.rotate-ccw').click(function () {
            $('.image-editor').cropit('rotateCCW');
        });

        $('.export').click(function () {
            var imageData = $('.image-editor').cropit('export');
            localStorage.setItem("croppedImage", imageData);
            window.location.href = "planeEditor.html";
        });
    });

//    $('.scale-button').click(function () {
//        $('.cropit-preview').css('width', '1200px');
////            alert($(this).attr('id'));
//        cropit();
//        $(".cropitReload").attr('src', src.split('?')[0] + "?" + Math.floor(Math.random()* 10000000));
//    });

//
//    var element = document.getElementById('socket'),
//        x = 0, y = 0;
//
//    interact('.circle-component')
//        .draggable({
//            snap: {
//                targets: [
//                    interact.createSnapGrid({ x: 15, y: 15 })
//                ],
//                range: Infinity,
//                relativePoints: [ { x: 0, y: 0 } ]
//            },
//            inertia: true,
//            restrict: {
//                restriction: element.parentNode,
//                elementRect: { top: 0, left: 0, bottom: 1, right: 1 },
//                endOnly: true
//            },
//            onmove: dragMoveListener,
//        });
//        function dragMoveListener (event) {
//            var target = event.target,
//                // keep the dragged position in the data-x/data-y attributes
//                x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
//                y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
//
//            // translate the element
//            target.style.webkitTransform =
//                target.style.transform =
//                    'translate(' + x + 'px, ' + y + 'px)';
//
//            // update the posiion attributes
//            target.setAttribute('data-x', x);
//            target.setAttribute('data-y', y);
//        }




    // target elements with the "draggable" class
    interact('.draggable')
        .draggable({
            // enable inertial throwing
            inertia: true,
            // keep the element within the area of it's parent
            restrict: {
                restriction: "parent",
                endOnly: true,
                elementRect: { top: 0, left: 0, bottom: 1, right: 1 }
            },
            // enable autoScroll
            autoScroll: true,
            // enable snapping to grid
            snap: {
                targets: [
                    interact.createSnapGrid({ x: 15, y: 15 })
                ],
                range: Infinity,
                relativePoints: [ { x: 0, y: 0 } ]
            },

            // call this function on every dragmove event
            onmove: dragMoveListener,
            // call this function on every dragend event
            onend: function (event) {
                var textEl = event.target.querySelector('p');

                textEl && (textEl.textContent =
                    'moved a distance of '
                    + (Math.sqrt(Math.pow(event.pageX - event.x0, 2) +
                    Math.pow(event.pageY - event.y0, 2) | 0))
                        .toFixed(3) + 'px');
            }
        });

    function dragMoveListener (event) {
        var target = event.target,
            // keep the dragged position in the data-x/data-y attributes
            x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
            y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

        // translate the element
        target.style.webkitTransform =
            target.style.transform =
                'translate(' + x + 'px, ' + y + 'px)';

        // update the posiion attributes
        target.setAttribute('data-x', x);
        target.setAttribute('data-y', y);
    }

    // this is used later in the resizing and gesture demos
    window.dragMoveListener = dragMoveListener;



</script>

<script>window.__theme = 'bs4';</script>
</body>
</html>
